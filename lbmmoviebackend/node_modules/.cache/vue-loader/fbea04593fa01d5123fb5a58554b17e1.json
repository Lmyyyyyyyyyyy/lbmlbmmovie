{"remainingRequest":"E:\\Work\\Java\\lbmmovie\\lbmmoviebackend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Work\\Java\\lbmmovie\\lbmmoviebackend\\src\\views\\Activity.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Work\\Java\\lbmmovie\\lbmmoviebackend\\src\\views\\Activity.vue","mtime":1681576774541},{"path":"E:\\Work\\Java\\lbmmovie\\lbmmoviebackend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Work\\Java\\lbmmovie\\lbmmoviebackend\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQge0NyZWF0ZUFjdGl2aXR5LCBEZWxldGVBY3Rpdml0eUJ5SWQsIExpc3RBbGxBY3Rpdml0eX0gZnJvbSAiQC9hcGkvYWN0aXZpdHkiOw0KDQpleHBvcnQgZGVmYXVsdCB7DQoNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgcGlja2VyT3B0aW9uczogew0KICAgICAgICBkaXNhYmxlZERhdGUodGltZSkgew0KICAgICAgICAgIHJldHVybiB0aW1lLmdldFRpbWUoKSA+IERhdGUubm93KCk7DQogICAgICAgIH0sDQogICAgICAgIHNob3J0Y3V0czogW3sNCiAgICAgICAgICB0ZXh0OiAn5LuK5aSpJywNCiAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgew0KICAgICAgICAgICAgcGlja2VyLiRlbWl0KCdwaWNrJywgbmV3IERhdGUoKSk7DQogICAgICAgICAgfQ0KICAgICAgICB9LCB7DQogICAgICAgICAgdGV4dDogJ+aYqOWkqScsDQogICAgICAgICAgb25DbGljayhwaWNrZXIpIHsNCiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZSgpOw0KICAgICAgICAgICAgZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpIC0gMzYwMCAqIDEwMDAgKiAyNCk7DQogICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBkYXRlKTsNCiAgICAgICAgICB9DQogICAgICAgIH0sIHsNCiAgICAgICAgICB0ZXh0OiAn5LiA5ZGo5YmNJywNCiAgICAgICAgICBvbkNsaWNrKHBpY2tlcikgew0KICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKCk7DQogICAgICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSAzNjAwICogMTAwMCAqIDI0ICogNyk7DQogICAgICAgICAgICBwaWNrZXIuJGVtaXQoJ3BpY2snLCBkYXRlKTsNCiAgICAgICAgICB9DQogICAgICAgIH1dDQogICAgICB9LA0KICAgICAgbG9hZGluZzogZmFsc2UsDQogICAgICBsaXN0OiBbXSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGZvcm06IHsNCiAgICAgICAgY29udGVudDogJycsDQogICAgICAgIHN0YXJ0VGltZTogJycsDQogICAgICAgIGVuZFRpbWU6ICcnLA0KICAgICAgfSwNCiAgICB9DQogIH0sDQoNCiAgbW91bnRlZCgpIHsNCiAgICB0aGlzLmxvYWRMaXN0KCk7DQogIH0sDQoNCiAgbWV0aG9kczogew0KDQogICAgbG9hZExpc3QoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOw0KICAgICAgTGlzdEFsbEFjdGl2aXR5KCkudGhlbihyZXMgPT4gew0KICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHsNCiAgICAgICAgICB0aGlzLmxpc3QgPSByZXMuZGF0YQ0KICAgICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlDQogICAgICAgIH0sIDcwMCkNCiAgICAgIH0pDQogICAgfSwNCg0KICAgIHN1Ym1pdEFjdGl2aXR5KCkgew0KICAgICAgQ3JlYXRlQWN0aXZpdHkodGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgIGlmIChyZXMuc3VjY2Vzcykgew0KICAgICAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+S/neWtmOaIkOWKnyEnDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5sb2FkTGlzdCgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCg0KICAgIGhhbmRsZURlbGV0ZShpbmRleCkgew0KICAgICAgRGVsZXRlQWN0aXZpdHlCeUlkKHRoaXMubGlzdFtpbmRleF0uaWQpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgaWYgKHJlcy5zdWNjZXNzKSB7DQogICAgICAgICAgdGhpcy5saXN0LnNsaWNlKGluZGV4LCAxKQ0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ3N1Y2Nlc3MnLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+WIoOmZpOaIkOWKnyEnDQogICAgICAgICAgfSk7DQogICAgICAgICAgdGhpcy5sb2FkTGlzdCgpDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCg0KICB9LA0KDQp9DQo="},{"version":3,"sources":["Activity.vue"],"names":[],"mappings":";AAgEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Activity.vue","sourceRoot":"src/views","sourcesContent":["<template>\r\n  <div style=\"padding: 40px\">\r\n    <el-button @click=\"dialogFormVisible = true\" plain>添加影院活动</el-button>\r\n    <el-table\r\n        v-loading=\"loading\"\r\n        :data=\"list\"\r\n        style=\"width: 100%;margin-top: 20px\">\r\n      <el-table-column\r\n          prop=\"startTime\"\r\n          label=\"开始时间\"\r\n          width=\"220\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"endTime\"\r\n          label=\"结束时间\"\r\n          width=\"220\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"content\"\r\n          label=\"活动内容\">\r\n      </el-table-column>\r\n      <el-table-column\r\n          prop=\"number\"\r\n          label=\"参加人数\">\r\n      </el-table-column>\r\n      <el-table-column width=\"150\" label=\"操作\">\r\n        <template slot-scope=\"props\">\r\n          <el-button @click=\"handleDelete(props.$index)\" size=\"small\" type=\"danger\" plain>删 除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <el-dialog title=\"新增活动表单\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :model=\"form\">\r\n        <el-form-item style=\"padding-right: 100px\" label=\"开始日期\" label-width=\"120px\">\r\n          <el-date-picker\r\n              v-model=\"form.startTime\"\r\n              type=\"date\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              placeholder=\"开始日期\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item style=\"padding-right: 100px\" label=\"结束日期\" label-width=\"120px\">\r\n          <el-date-picker\r\n              v-model=\"form.endTime\"\r\n              type=\"date\"\r\n              value-format=\"yyyy-MM-dd\"\r\n              placeholder=\"结束日期\">\r\n          </el-date-picker>\r\n        </el-form-item>\r\n        <el-form-item style=\"padding-right: 100px\" label=\"活动内容\" label-width=\"120px\">\r\n          <el-input :rows=\"8\" type=\"textarea\" v-model=\"form.content\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitActivity\">确 定 保 存</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {CreateActivity, DeleteActivityById, ListAllActivity} from \"@/api/activity\";\r\n\r\nexport default {\r\n\r\n  data() {\r\n    return {\r\n      pickerOptions: {\r\n        disabledDate(time) {\r\n          return time.getTime() > Date.now();\r\n        },\r\n        shortcuts: [{\r\n          text: '今天',\r\n          onClick(picker) {\r\n            picker.$emit('pick', new Date());\r\n          }\r\n        }, {\r\n          text: '昨天',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }, {\r\n          text: '一周前',\r\n          onClick(picker) {\r\n            const date = new Date();\r\n            date.setTime(date.getTime() - 3600 * 1000 * 24 * 7);\r\n            picker.$emit('pick', date);\r\n          }\r\n        }]\r\n      },\r\n      loading: false,\r\n      list: [],\r\n      dialogFormVisible: false,\r\n      form: {\r\n        content: '',\r\n        startTime: '',\r\n        endTime: '',\r\n      },\r\n    }\r\n  },\r\n\r\n  mounted() {\r\n    this.loadList();\r\n  },\r\n\r\n  methods: {\r\n\r\n    loadList() {\r\n      this.loading = true;\r\n      ListAllActivity().then(res => {\r\n        setTimeout(() => {\r\n          this.list = res.data\r\n          this.loading = false\r\n        }, 700)\r\n      })\r\n    },\r\n\r\n    submitActivity() {\r\n      CreateActivity(this.form).then(res => {\r\n        if (res.success) {\r\n          this.dialogFormVisible = false\r\n          this.$message({\r\n            type: 'success',\r\n            message: '保存成功!'\r\n          });\r\n          this.loadList()\r\n        }\r\n      })\r\n    },\r\n\r\n    handleDelete(index) {\r\n      DeleteActivityById(this.list[index].id).then(res => {\r\n        if (res.success) {\r\n          this.list.slice(index, 1)\r\n          this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n          this.loadList()\r\n        }\r\n      })\r\n    },\r\n\r\n  },\r\n\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}